# AI 助手工作指南

> 📌 **重要**：如果你是新加入的 AI 助手，请仔细阅读此文档，了解项目背景和工作规则

---

## 📋 项目概览

### 项目名称
**Fast Info** - 高质量新闻聚合平台

### 项目简介
这是一个面向技术爱好者和学生的新闻聚合平台，专注于科技、开发者和学术领域的高质量信息。通过智能筛选和分类展示，帮助用户高效获取有价值的资讯。

### 开发者信息
- **开发者**：Johnny（大二学生）
- **预算限制**：¥200/月以内
- **开始时间**：2025-11-15
- **目标完成**：MVP 预计 4 周

---

## 🎯 项目目标

### 短期目标（当前阶段）
1. 完成前后端基础框架搭建 ✅
2. 实现 6 个数据源的爬虫 ✅
3. 完成基础的数据展示页面 🔄
4. 部署到免费平台

### 核心功能
- 多源信息聚合（科技、开发者、学术）
- 智能分类和排序
- 搜索和筛选
- 用户系统和个性化订阅（二期）
- 收藏和稍后阅读（二期）

### 技术栈
- **前端**：Vue 3 + Vite + TailwindCSS + Naive UI + Geist 字体
- **后端**：Node.js + Express + Supabase (PostgreSQL)
- **部署**：Vercel (前端) + Railway/Render (后端)

---

## 📚 必读文档

在开始工作前，请务必阅读以下文档：

### 1. PROJECT_PLAN.md（项目策划书）
- **路径**：`/Users/johnny/Project/Fast Info/PROJECT_PLAN.md`
- **内容**：
  - 完整的项目规划
  - 技术方案和架构设计
  - 数据库设计
  - 成本控制方案
  - 部署策略
- **重要性**：⭐⭐⭐⭐⭐
- **必读理由**：了解项目的整体架构和技术决策依据

### 2. WORKFLOW.md（开发工作流）
- **路径**：`/Users/johnny/Project/Fast Info/WORKFLOW.md`
- **内容**：
  - 4 周开发计划
  - 180+ 个详细任务清单
  - 每个任务的验收标准
  - 进度跟踪记录
- **重要性**：⭐⭐⭐⭐⭐
- **必读理由**：了解当前进度和下一步要做什么

### 3. README.md（项目说明）
- **路径**：`/Users/johnny/Project/Fast Info/README.md`
- **内容**：项目介绍、技术栈、快速开始
- **重要性**：⭐⭐⭐⭐

---

## 🎨 当前项目状态

### 已完成 ✅

**Week 1 完成（2025-11-15 ~ 2025-11-16）**

**文档部分**
- [x] 项目策划书（PROJECT_PLAN.md）
- [x] 开发工作流（WORKFLOW.md）
- [x] 项目说明（README.md）
- [x] AI 助手工作指南（AI_GUIDE.md）
- [x] Git 仓库初始化

**前端部分（完整）**
- [x] Vue 3 + Vite 项目创建
- [x] 依赖安装（Vue Router, Pinia, Axios, TailwindCSS v3, Naive UI, Geist）
- [x] 目录结构创建
- [x] 路由配置（5 个页面）
- [x] API 请求封装（axios 拦截器）
- [x] Pinia store 配置
- [x] 基础页面创建（Home, Tech, Dev, Academic, Search）
- [x] Figma 极简风格设计（48px 固定顶栏 + transform 效果）
- [x] TailwindCSS 配置（降级到 v3 解决兼容性）
- [x] 环境变量配置
- [x] 集成项目 Logo（黑底白色波浪线）
- [x] 配置专业字体系统（Geist + Noto Sans SC）
- [x] 实现数据展示（从后端 API 获取真实数据）
- [x] 实现分类切换（全部/科技/开发者/开源/学术/产品）
- [x] 加载状态、错误处理、空状态

**后端部分（完整）**
- [x] Node.js + Express 项目初始化
- [x] 依赖安装（Express, Supabase, Axios, Cheerio, Puppeteer, node-cron 等）
- [x] 目录结构创建
- [x] 环境变量配置
- [x] server.js 入口文件（RESTful API）
- [x] Supabase 客户端配置（anon key + service_role key）
- [x] 服务层架构（Controllers → Services → Supabase）
- [x] Article Service 完整实现（CRUD + 搜索 + 分页）
- [x] Article Controller 完整实现（参数验证）
- [x] RESTful 路由（/api/articles）
- [x] CORS 配置

**数据库（Supabase PostgreSQL）**
- [x] Supabase 项目创建
- [x] articles 表完整 schema 设计
- [x] 行级安全策略（RLS）配置
- [x] 性能优化索引（分类、来源、时间等）
- [x] 自动更新 updated_at 触发器
- [x] 全文搜索索引
- [x] 数据约束（5 个分类 + 6 个来源）
- [x] Supabase MCP 配置

**爬虫系统（6 个数据源全部完成）**
- [x] 基础爬虫类（fetch → transform → clean → score → save）
- [x] 质量评分算法（0-100 分）
- [x] 热度评分算法（时间衰减）
- [x] 自动分类系统（tech/dev/opensource/academic/product）
- [x] **Hacker News 爬虫**（官方 API）- 每 2 小时
- [x] **GitHub Trending 爬虫**（Cheerio HTML 解析）- 每 4 小时
- [x] **Dev.to 爬虫**（官方 API）- 每 2 小时
- [x] **arXiv 爬虫**（XML API，cs.AI 分类）- 每 6 小时
- [x] **AIBase 爬虫**（Puppeteer JavaScript 渲染）- 每 4 小时
- [x] **Product Hunt 爬虫**（GraphQL API + OAuth）- 每 3 小时
- [x] 调度器系统（node-cron 定时任务）
- [x] 数据清理系统（48 小时自动清理）

**当前数据统计（2025-11-16）**
- 数据库总文章数：132 条
- 5 个分类：tech, dev, opensource, academic, product
- 6 个数据源全部稳定运行
- 调度器和清理系统正常运行

### 下一步任务 📝

**Week 2 重点（当前阶段）**

根据 WORKFLOW.md，下一步应该做：

1. **完善前端功能**
   - 添加 Product 分类页面
   - 优化各分类页面样式
   - 实现搜索功能
   - 实现分页功能
   - 响应式设计优化
   - 用户体验改进

2. **可选：添加更多数据源**
   - 掘金 API
   - V2EX API
   - 少数派 RSS
   - IT之家 RSS
   - （根据需要决定）

3. **性能优化**
   - 图片懒加载
   - 缓存优化
   - API 响应速度优化

4. **准备部署**
   - 前端部署到 Vercel
   - 后端部署到 Railway/Render
   - 配置定时任务
   - 域名配置

---

## ⚠️ 重要工作规则

### 🚨 法律合规规则（最高优先级，必须严格遵守）

**Fast Info 必须严格遵守中国和美国的法律法规，特别是版权法和知识产权法。**

**版权和内容使用原则：**

1. **✅ 允许的行为**
   - 展示文章标题、作者、发布时间（事实性信息）
   - 展示 API 提供的官方摘要（已授权）
   - 提供原文链接（引用合理）
   - 基于公开信息的原创分析和评论
   - 热度数据统计和趋势分析

2. **❌ 严格禁止的行为**
   - 抓取并展示完整原文内容
   - 翻译并展示完整文章
   - 移除原作者署名或来源标注
   - 声称他人内容为本平台所有
   - 绕过付费墙抓取付费内容
   - 复制粘贴大段原文（引用应 < 10%）

3. **AI 功能的合规使用**
   - ✅ AI 生成概括性摘要（基于标题和公开摘要）
   - ✅ AI 生成原创技术分析（评论性质）
   - ✅ AI 回答关于技术的问题（基于公开信息）
   - ❌ AI 改写/转述完整原文
   - ❌ AI 翻译完整文章并展示

4. **必须实现的保护措施**
   - 所有内容必须明确标注来源和作者
   - 提供"版权投诉"渠道
   - 收到投诉后 24 小时内处理
   - 添加清晰的"服务条款"和"隐私政策"页面
   - 不得用于商业目的的内容需特别标注

5. **产品定位原则**
   - Fast Info 定位为"技术情报分析平台"，不是"内容转载平台"
   - 核心价值是"原创分析"和"趋势发现"，不是"内容搬运"
   - 付费功能应基于原创服务，不是转载内容

**如有任何法律合规方面的疑问，必须立即停止开发并咨询用户。**

---

### 🔴 重大决策规则（必须遵守）

**以下情况必须询问用户 Johnny 的意见，不得擅自决定：**

1. **架构变更**
   - 更换技术栈（如从 Vue 换成 React）
   - 更改数据库方案（如从 MongoDB 换成 PostgreSQL）
   - 调整项目结构

2. **成本相关**
   - 选择付费服务（即使在预算内）
   - 升级服务配置
   - 需要信用卡或付费账号

3. **安全敏感**
   - API 密钥的配置
   - 账号密码的设置
   - 数据库连接字符串
   - JWT Secret 等敏感信息
   - **做法**：告知用户需要配置什么，让用户自己填写

4. **外部服务配置**
   - 注册第三方服务（GitHub, Vercel, MongoDB Atlas 等）
   - 配置 OAuth
   - 配置 MCP 服务器
   - **做法**：提供详细的配置步骤，让用户自己操作

5. **功能取舍**
   - 删减或大幅修改策划书中的功能
   - 优先级调整
   - 技术方案的重大变更

### ✅ 可以自主决定的事项

1. **代码实现细节**
   - 函数命名
   - 代码结构优化
   - 注释和文档
   - 小的性能优化

2. **UI/UX 细节**
   - 颜色微调（在设计规范内）
   - 间距调整
   - 动画效果
   - 按钮样式

3. **开发工具**
   - 使用免费的开发工具
   - IDE 插件推荐
   - 调试技巧

### 📋 决策流程示例

**❌ 错误做法**：
```
AI: 我帮你创建了 MongoDB Atlas 账号，并配置了数据库连接...
```

**✅ 正确做法**：
```
AI: 接下来需要配置 MongoDB 数据库。我建议使用 MongoDB Atlas 的免费版。

    需要你完成以下步骤：
    1. 访问 https://www.mongodb.com/cloud/atlas/register
    2. 注册账号（建议用学校邮箱）
    3. 创建免费集群（选择 M0 免费版）
    4. 获取连接字符串
    5. 将连接字符串填入 backend/.env 文件的 MONGODB_URI

    是否需要我提供详细的图文教程？
```

---

## 🔧 技术决策参考

### 为什么选择这些技术？

**前端：Vue 3 + Vite**
- ✅ 用户熟悉 Vue
- ✅ 上手快，文档友好
- ✅ 国内生态好
- ✅ Vite 构建速度快

**后端：Node.js + Express**
- ✅ 与前端同语言（JavaScript）
- ✅ 适合 I/O 密集型任务（爬虫）
- ✅ 生态丰富
- ✅ 部署简单

**数据库：Supabase (PostgreSQL)**
- ✅ 开源、免费版额度充足
- ✅ 基于 PostgreSQL，性能优秀
- ✅ 内置行级安全（RLS）
- ✅ 支持全文搜索
- ✅ 提供 RESTful API 和实时订阅
- ✅ MCP 工具支持，便于数据库操作

### 成本控制原则

1. **优先使用免费服务**
   - Vercel/Netlify（前端）
   - Railway/Render 免费版（后端）
   - MongoDB Atlas M0（数据库）
   - GitHub Actions（定时任务）

2. **申请学生优惠**
   - GitHub Student Developer Pack
   - DigitalOcean $200 信用额
   - 各种学生优惠

3. **目标**：月成本控制在 ¥0-200 以内

---

## 📁 项目结构

```
Fast Info/
├── frontend/                 # Vue 3 前端
│   ├── src/
│   │   ├── views/           # 页面组件
│   │   ├── components/      # 通用组件
│   │   ├── api/             # API 接口
│   │   ├── store/           # Pinia 状态
│   │   ├── router/          # 路由配置
│   │   └── assets/          # 静态资源
│   ├── .env.development     # 开发环境配置
│   └── package.json
│
├── backend/                 # Node.js 后端
│   ├── src/
│   │   ├── routes/         # API 路由
│   │   ├── controllers/    # 控制器
│   │   ├── models/         # Mongoose 模型
│   │   ├── services/       # 业务逻辑
│   │   ├── crawlers/       # 爬虫模块
│   │   ├── utils/          # 工具函数
│   │   └── config/         # 配置文件
│   ├── .env                # 环境变量（不提交）
│   ├── .env.example        # 环境变量示例
│   └── package.json
│
├── PROJECT_PLAN.md         # 项目策划书 ⭐ 必读
├── WORKFLOW.md             # 开发工作流 ⭐ 必读
├── AI_GUIDE.md             # AI 助手指南（本文件）
├── README.md               # 项目说明
└── .gitignore
```

---

## 💡 工作建议

### 开始工作前

1. **阅读必读文档**
   - PROJECT_PLAN.md - 了解项目整体规划
   - WORKFLOW.md - 了解当前进度和任务

2. **检查当前状态**
   - 查看 Git 提交历史：`git log --oneline`
   - 查看 WORKFLOW.md 中的任务状态
   - 询问用户当前想做什么

3. **确认工作目标**
   - 询问用户本次会话的目标
   - 根据 WORKFLOW.md 确定优先级
   - 明确验收标准

### 工作过程中

1. **频繁更新进度**
   - 使用 TodoWrite 工具记录任务进度
   - 完成一个任务立即标记为完成
   - 让用户了解当前进展

2. **代码提交规范**
   - 每完成一个功能模块就提交
   - 使用清晰的 commit message
   - 格式：`feat: 功能描述` 或 `fix: 修复描述`

3. **遇到问题**
   - 技术问题：先尝试解决，解决不了告知用户
   - 决策问题：按照"重大决策规则"处理
   - 不确定的事：询问用户

### 结束工作时

1. **更新文档**
   - 更新 WORKFLOW.md 的进度
   - 更新 README.md（如有必要）
   - 记录遇到的问题

2. **代码提交**
   - 确保代码已提交
   - commit message 清晰
   - 没有敏感信息

3. **总结汇报**
   - 本次完成了什么
   - 遇到了什么问题
   - 下次建议做什么

---

## 🚨 常见问题处理

### Q1: 需要配置数据库时怎么办？
**A**:
1. 告知用户需要配置 MongoDB
2. 提供详细的注册和配置步骤
3. 不要擅自替用户注册账号
4. 等待用户提供连接字符串

### Q2: 需要 API 密钥时怎么办？
**A**:
1. 说明需要哪个服务的 API 密钥
2. 提供获取步骤
3. 告知在 .env 文件中配置
4. 提醒不要提交到 Git

### Q3: 发现策划书的方案不合适怎么办？
**A**:
1. 先按策划书执行
2. 记录发现的问题
3. 询问用户是否需要调整
4. 不要擅自更改技术方案

### Q4: 用户要求的功能超出预算怎么办？
**A**:
1. 说明成本影响
2. 提供替代方案
3. 让用户决定

### Q5: 代码出现 Bug 怎么办？
**A**:
1. 尝试自己调试解决
2. 如果解决不了，告知用户
3. 提供错误日志
4. 建议排查步骤

---

## 📝 进度记录模板

每次工作建议在 WORKFLOW.md 的"开发日志"部分记录：

```markdown
### 2025-XX-XX（Week X, Day X）
- ✅ 完成：XXX 功能
- ✅ 完成：XXX 模块
- ⬜ 待办：XXX 任务
- ⚠️ 问题：遇到 XXX 问题，已解决/待解决
```

---

## 🎓 学生项目特点

记住这是一个**学生项目**：

1. **预算有限**
   - 优先免费方案
   - 充分利用学生优惠

2. **学习为主**
   - 重视代码质量
   - 添加详细注释
   - 可以作为简历项目

3. **时间充足**
   - 不用追求最快速度
   - 可以慢慢打磨细节
   - 注重基础和规范

4. **成果导向**
   - 最终要能演示
   - 适合放进作品集
   - 面试时能讲清楚

---

## 📞 联系和决策

**开发者**：Johnny
**身份**：大二学生
**风格**：希望做一个完整、规范、可展示的项目

**沟通原则**：
- 重大决策必须询问
- 技术选型要解释原因
- 成本相关提前说明
- 配置操作给出步骤

---

## ✅ 检查清单

开始工作前，请确认：

- [ ] 已阅读 PROJECT_PLAN.md
- [ ] 已阅读 WORKFLOW.md
- [ ] 了解当前项目进度
- [ ] 知道本次工作目标
- [ ] 明白决策规则
- [ ] 准备好使用 TodoWrite 记录进度

---

**最后更新**：2025-11-16
**文档版本**：v1.1
**维护者**：Claude Code

---

## 🌟 祝工作顺利！

记住：Johnny 是学生，这是他的学习项目，请耐心、细致地帮助他完成这个项目。

**核心原则**：
1. **法律合规第一**（版权、隐私、数据保护）
2. 重大决策问用户
3. 敏感配置让用户做
4. 代码质量要保证
5. 进度透明要更新
6. 成本控制要严格

💪 让我们一起打造一个优秀的、合法合规的项目！
